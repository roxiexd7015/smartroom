<link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<!--Navbar pentru telefon-->
<nav class="navbar navbar-light bg-light d-md-none shadow-sm px-3">
  <a class="navbar-brand fw-bold" href="#">ðŸŒ¿ SmartRoom</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
    <span class="navbar-toggler-icon"></span>
  </button>
</nav>

<!--meniu lateral pe telefon -->
<div class="offcanvas offcanvas-start d-md-none" tabindex="-1" id="mobileSidebar">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">SmartRoom</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="nav flex-column">
      <li><a href="/dashboard" class="nav-link {% if request.path == '/dashboard' %}active{% endif %}"><i class="bi bi-house-door"></i> Dashboard</a></li>
      <li><a href="/charts" class="nav-link {% if request.path.startswith('/charts') or request.path.startswith('/details') %}active{% endif %}"><i class="bi bi-graph-up"></i> Grafic senzori</a></li>
      <li><a href="/settings" class="nav-link {% if request.path == '/settings' %}active{% endif %}"><i class="bi bi-gear"></i> SetÄƒri</a></li>
      <li><a href="/alerts" class="nav-link {% if request.path == '/alerts' %}active{% endif %}"><i class="bi bi-bell"></i> Alerte</a></li>
      <li><a href="/export" class="nav-link {% if request.path == '/export' %}active{% endif %}"><i class="bi bi-download"></i> Export</a></li>
      <li><a href="/modes" class="nav-link {% if request.path == '/modes' %}active{% endif %}"><i class="bi bi-moon-stars"></i> Moduri</a></li>
      <li><a href="/about" class="nav-link {% if request.path == '/about' %}active{% endif %}"><i class="bi bi-info-circle"></i> Despre</a></li>
    </ul>
  </div>
</div>

<div class="sidebar">
  <ul>
    <li>
      <a href="/dashboard" class="nav-link {% if request.path == '/dashboard' %}active{% endif %}">
        <i class="bi bi-house-door"></i>
        <span>Dashboard</span>
      </a>
    </li>
    <li>
      <a href="/charts" class="nav-link {% if request.path.startswith('/charts') or request.path.startswith('/details') %}active{% endif %}">
        <i class="bi bi-graph-up"></i>
        <span>Grafic senzori</span>
      </a>
    </li>
    <li>
      <a href="/settings" class="nav-link {% if request.path == '/settings' %}active{% endif %}">
        <i class="bi bi-gear"></i>
        <span>SetÄƒri / Control</span>
      </a>
    </li>
    <li>
      <a href="/alerts" class="nav-link {% if request.path == '/alerts' %}active{% endif %}">
        <i class="bi bi-bell"></i>
        <span>Alerte</span>
      </a>
    </li>
    <li>
      <a href="/export" class="nav-link {% if request.path == '/export' %}active{% endif %}">
        <i class="bi bi-download"></i>
        <span>Export date</span>
      </a>
    </li>
    <li>
      <a href="/modes" class="nav-link {% if request.path == '/modes' %}active{% endif %}">
        <i class="bi bi-moon-stars"></i>
        <span>Moduri ambientale</span>
      </a>
    </li>
    <li>
      <a href="/about" class="nav-link {% if request.path == '/about' %}active{% endif %}">
        <i class="bi bi-info-circle"></i>
        <span>Despre</span>
      </a>
    </li>
  </ul>
</div>

<button id="sidebarToggle" class="btn btn-outline-dark d-md-none" style="position: fixed; top: 10px; left: 10px; z-index: 1100;">
  <i class="bi bi-list"></i>
</button>

<script>
  const sidebar = document.getElementById("smartSidebar");
  const toggle = document.getElementById("sidebarToggle");
  let startX = null;

  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("active");
  });

  document.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
  });

  document.addEventListener("touchend", (e) => {
    if (startX !== null) {
      let endX = e.changedTouches[0].clientX;
      if (startX < 50 && endX - startX > 60) {
        sidebar.classList.add("active");
      }
    }
    startX = null;
  });
</script>
